<!DOCTYPE html>
<html>

<head>
    <title>PTA | Analytics</title>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="../stylesheets/home.css" />
    <link rel="stylesheet" type="text/css" href="../stylesheets/navbar.css" />
    <link rel="stylesheet" type="text/css" href="../stylesheets/analytics.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
</head>

<body class="container">
    <div class="header">
        <div class="navbar">
            <a href="home"><img src="/images/logo.png" class="logo" alt="Logo"></a>
            <ul class="tabs">
                <li class="home"><a href="home">Home</a></li>
                <li class="athletes"><a href="athletes">Athletes</a></li>
                <li class="clubs"><a href="clubs">Clubs</a></li>
                <li class="events"><a href="events">Events</a></li>
                <li class="membership"><a href="membership">Membership</a></li>
                <li class="forum"><a href="forum">Forum</a></li>
                <li class="notifications">
                    <a href="notifications">Notifications
                        {{#if notifications}}
                        <span class="badge">{{notifications.length}}</span>
                        {{/if}}
                    </a>
                </li>
                <li class="analytics"><a href="analytics">Analytics</a></li>
                <li class="profile-pic">
                    {{#if user.profilepic}}
                    <a href="#" onclick="toggleDropdown()"><img src="{{user.profilepic}}" alt="Profile Picture"
                            class="profile-picture"></a>
                    {{else}}
                    <a href="#" onclick="toggleDropdown()" class="profile-picture"><img src="/images/none.jpg"
                            alt="Profile Picture" class="profile-picture"></a>
                    {{/if}}
                    <div id="dropdown" class="dropdown-content">
                        <a href="profile">Profile</a>
                        <a href="settings">Settings</a>
                        <a href="help-center">FAQs</a>
                        <a href="/">Logout</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <!-- Filter and Create Report Section -->
    <div class="action-bar">
        <div class="filter-panel">
            <div class="filter-group">
                <label for="date-today">Date Today:</label>
                <input type="text" id="date-today" placeholder="Search...">
            </div>
            <div class="filter-group">
                <label for="start-date">Start Date</label>
                <input type="text" id="start-date" class="datepicker">
            </div>
            <div class="filter-group">
                <label for="end-date">End Date</label>
                <input type="text" id="end-date" class="datepicker">
            </div>

            <button class="apply-btn">Apply</button>
        </div>
        <!-- Changed to button with onclick event -->
        <button type="button" class="create-report-button" onclick="openModal()">+ Create Report</button>
    </div>

    <div class="analytics-container">
        <div class="card summary-card">
            <div class="header">Summary</div>
            <ul class="summary-list">
                <li>Top Performers of the Year</li>
                <li>Total Events in the Year</li>
                <li>Total Clubs in a year</li>
                <li>Total Participants in a year</li>
            </ul>
            <button class="see-more-button">See more</button>
        </div>

        <div class="card top-performers-card">
            <div class="header">Top Performers</div>
            <ul>
                <li>John Doe - 5 Medals</li>
                <li>Jane Smith - 4 Medals</li>
                <li>Emily Johnson - 3 Medals</li>
            </ul>
        </div>

        <div class="card upcoming-events-card">
            <div class="header">Upcoming Events</div>
            <ul>
                <li>Event 1: National Championships - Nov 15</li>
                <li>Event 2: Regional Meet - Dec 10</li>
            </ul>
        </div>

        <div class="card clubs-card">
            <div class="header">Clubs</div>
        </div>

        <div class="card member-engagement-card">
            <div class="header">Member Engagement</div>
            <ul>
                <li>Active Members: 200</li>
                <li>Inactive Members: 50</li>
            </ul>
        </div>
    </div>

    <div id="createReportModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal()">&times;</span>
            <h2>Create Report</h2>

            <!-- Report Form -->
            <form class="report-form">
                <div class="form-group">
                    <label for="report-title">Report Title:</label>
                    <input type="text" id="report-title" placeholder="Enter report title">
                </div>

                <div class="form-group">
                    <label for="report-description">Description:</label>
                    <textarea id="report-description" placeholder="Enter report description"></textarea>
                </div>

                <div class="form-group">
                    <label for="report-start-date">Start Date:</label>
                    <input type="text" id="report-start-date" class="datepicker">

                    <label for="report-end-date">End Date:</label>
                    <input type="text" id="report-end-date" class="datepicker">

                </div>

                <div class="form-group">
                    <label for="report-type">Report Type:</label>
                    <select id="report-type">
                        <option value="top-performers">Top Performers</option>
                        <option value="upcoming-events">Upcoming Events</option>
                        <option value="clubs">Clubs</option>
                        <option value="member-engagement">Member Engagement</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="report-format">Format:</label>
                    <select id="report-format">
                        <option value="pdf">PDF</option>
                        <option value="excel">Excel</option>
                        <option value="word">Word</option>
                    </select>
                </div>

                <button type="button" class="submit-report-button" onclick="submitReport()">Submit Report</button>
            </form>
        </div>
    </div>


    <footer>
        <div class="footer-content">
            <div class="pta-logo">
                <img src="/images/logo.png" alt="PTA Logo">
            </div>
            <div class="contact-info">
                <p>Philippine Taekwondo Central Headquarters</p>
                <p>Rizal Memorial Coliseum, Manila, Philippines</p>
                <p>0977 384 5879</p>
                <p>pthtkd@gmail.com</p>
            </div>
            <div class="social-media">
                <p>Follow us</p>
                <div class="icons">
                    <a href="https://www.facebook.com"><img src="/images/homepage/fb.png" alt="Facebook"></a>
                    <a href="https://www.instagram.com"><img src="/images/homepage/ig.png" alt="Instagram"></a>
                    <a href="https://www.twitch.com"><img src="/images/homepage/twitch.webp" alt="Twitch"></a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        function toggleDropdown() {
            document.getElementById("dropdown").classList.toggle("show");
        }

        window.onclick = function (event) {
            if (!event.target.matches('.profile-pic img')) {
                var dropdowns = document.getElementsByClassName("dropdown-content");
                for (var i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                        openDropdown.classList.remove('show');
                    }
                }
            }
        }

        document.addEventListener("DOMContentLoaded", function () {
            const today = new Date();
            const formattedDate = today.toISOString().split("T")[0]; // YYYY-MM-DD format
            document.getElementById("date-today").value = formattedDate;
        });

        document.addEventListener("DOMContentLoaded", function () {
            // Initialize Flatpickr on elements with the 'datepicker' class
            flatpickr(".datepicker", {
                dateFormat: "Y-m-d", // Format as YYYY-MM-DD
                allowInput: true // Allow manual input as well
            });
        });

        var modal = document.getElementById("createReportModal");

        function openModal() {
            modal.style.display = "flex";
        }

        function closeModal() {
            modal.style.display = "none";
        }

        window.onclick = function (event) {
            if (event.target == modal) {
                closeModal();
            }
        }

        document.addEventListener("DOMContentLoaded", function () {
            flatpickr("#report-start-date", {
                dateFormat: "Y-m-d",
                allowInput: true
            });
            flatpickr("#report-end-date", {
                dateFormat: "Y-m-d",
                allowInput: true
            });
        });

        function submitReport() {
            const reportTitle = document.getElementById("report-title").value;
            const reportType = document.getElementById("report-type").value;

            if (reportType === "top-performers") {
                const listItem = document.createElement("li");
                listItem.textContent = reportTitle;
                document.getElementById("top-performers-list").appendChild(listItem);
            }

            closeModal();
        }

    </script>
</body>

</html>