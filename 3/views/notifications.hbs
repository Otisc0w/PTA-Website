<!DOCTYPE html>
<html>

<head>
    <title>PTA | Notifications</title>
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="../stylesheets/notifications.css" />
    <link rel="stylesheet" type="text/css" href="../stylesheets/navbar.css" />
</head>

<body class="container">
    <div class="header">
        <div class="navbar">
            <a href="home"><img src="/images/logo.png" class="logo" alt="Logo"></a>
            <ul class="tabs">
                <li class="home"><a href="home">Home</a></li>
                <li class="athletes"><a href="athletes">Athletes</a></li>
                <li class="clubs"><a href="clubs">Clubs</a></li>
                <li class="events"><a href="events">Events</a></li>
                <li class="membership"><a href="membership">Membership</a></li>
                <li class="forum"><a href="forum">Forum</a></li>
                <li class="notifications">
                    <a href="notifications">Notifications <span class="badge">3</span></a>
                </li>
                <li class="profile-pic">
                    {{#if user.profilepic}}
                    <a href="#" onclick="toggleDropdown()"><img src="{{user.profilepic}}" alt="Profile Picture" class="profile-picture"></a>
                    {{else}}
                    <a href="#" onclick="toggleDropdown()" class="profile-picture"><img src="/images/none.jpg" alt="Profile Picture" class="profile-picture"></a>
                    {{/if}}
                    <div id="dropdown" class="dropdown-content">
                        <a href="profile">Profile</a>
                        <a href="settings">Settings</a>
                        <a href="help-center">FAQs</a>
                        <a href="/">Logout</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <div class="notifications-container">
        <h1>Notifications</h1>
        <ul class="notifications-list">
            {{#each notifications}}
            <li class="notification">
                <span class="notification-type {{type}}">{{type}}</span>
                <div class="notification-content">
                    <h2>{{title}}</h2>
                    <p>{{message}}</p>
                    <span class="notification-user">{{user}}</span>
                    <span class="notification-time">{{time}}</span>
                </div>
                <button class="delete-button">X</button>
            </li>
            {{else}}
            <li>No notifications available</li>
            {{/each}}
        </ul>

        <h2>Pending Invitations</h2>
        <ul>
        {{#each club_invitations}}
                <li>
                    Club: {{this.clubname}}, Invited by: {{this.inviter_user}} {{this.invited_user}}
                    <form action="/accept-invitation/{{this.id}}" method="post" style="display: inline;">
                        <button type="submit">Accept</button>
                    </form>
                    <form action="/reject-invitation/{{this.id}}" method="post" style="display: inline;">
                        <button type="submit">Reject</button>
                    </form>
                </li>
        {{/each}}
        </ul>

    </div>

    <script>
        // This code assumes you have access to the `notifications` data in your JavaScript context.
        // If you don't, you need to make sure the data is available here.
        document.addEventListener("DOMContentLoaded", function () {
            // Assuming you have a variable `notifications` that holds your notifications data.
            const notifications = []; // Replace with actual data fetching logic.
            console.log("Notifications:", notifications);
        });

        function toggleDropdown() {
            document.getElementById("dropdown").classList.toggle("show");
        }

        window.onclick = function (event) {
            if (!event.target.matches('.profile-pic img')) {
                var dropdowns = document.getElementsByClassName("dropdown-content");
                for (var i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                        openDropdown.classList.remove('show');
                    }
                }
            }
        }

        function toggleEditDropdown() {
            document.getElementById("editDropdown").classList.toggle("show");
        }

        function uploadImage(event) {
            // Handle the image upload functionality here
        }

        function takePhoto() {
            // Handle the take photo functionality here
        }

        function removePicture() {
            // Handle the remove picture functionality here
        }
    </script>
</body>

</html>
