<!DOCTYPE html>
<html>
<head>
    <title>PTA | Help Center</title>
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="../stylesheets/navbar.css" />
    <link rel="stylesheet" type="text/css" href="../stylesheets/home.css" />
    <link rel="stylesheet" type="text/css" href="../stylesheets/faqs.css" />
</head>
<body class="container">
    <div class="header">
        <div class="navbar">
            <a href="home"><img src="/images/logo.png" class="logo" alt="Logo"></a>
            <ul class="tabs">
                <li class="home"><a href="home">Home</a></li>
                <li class="athletes"><a href="athletes">Athletes</a></li>
                <li class="clubs"><a href="clubs">Clubs</a></li>
                <li class="events"><a href="events">Events</a></li>
                <li class="membership"><a href="membership">Membership</a></li>
                <li class="forum"><a href="forum">Forum</a></li>
                <li class="notifications">
                    <a href="notifications">Notifications <span class="badge">3</span></a>
                </li>
                <li class="profile-pic">
                    {{#if user.profilepic}}
                        <a href="#" onclick="toggleDropdown()"><img src="{{user.profilepic}}" alt="Profile Picture" class="profile-picture"></a>
                    {{else}}
                        <a href="#" onclick="toggleDropdown()" class="profile-picture"><img src="/images/none.jpg" alt="Profile Picture" class="profile-picture"></a>
                    {{/if}}
                    <div id="dropdown" class="dropdown-content">
                        <a href="profile">Profile</a>
                        <a href="settings">Settings</a>
                        <a href="help-center">Help Center</a>
                        <a href="/">Logout</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <div class="faq-container">
        <h1>Help Center</h1>
        <p>Welcome to the help center. How can we assist you today?</p>

        <!-- Chatbot Button -->
        <div class="chatbot-button" id="chatbotButton" onclick="toggleChatbot()">
            <img src="/images/chatbot-icon.png" alt="Chatbot">
        </div>

        <!-- Chatbot Window -->
        <div class="chatbot-window" id="chatbotWindow">
            <div class="chatbot-header">
                <h2>Chatbot</h2>
                <span id="minimizeChatbot" onclick="minimizeChatbot()">-</span>
            </div>
            <div class="chatbot-body" id="chatbotBody">
                <p>Hi! How can I help you today?</p>
                <button onclick="sendPredefinedMessage('How to apply for NCC ID')">Apply for NCC ID</button>
                <button onclick="sendPredefinedMessage('Location & Store Hours')">üìç Location & Store Hours</button>
                <button onclick="sendPredefinedMessage('Price lists and the Services Offer')">üíº Price lists and the Services Offer</button>
                <button onclick="sendPredefinedMessage('Book an Appointment')">üìÖ BOOK AN APPOINTMENT</button>
                <button onclick="sendPredefinedMessage('Do you have any discount and promotion?')">üéâ Do you have any discount and promotion?</button>
            </div>
            <div class="chatbot-footer">
                <input type="text" id="chatbotInput" placeholder="Type your message here..." onkeydown="if (event.key === 'Enter') sendMessage()">
                <button onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <div class="pta-logo">
                <img src="/images/logo.png" alt="PTA Logo">
            </div>
            <div class="contact-info">
                <p>Philippine Taekwondo Central Headquarters</p>
                <p>Rizal Memorial Coliseum, Manila, Philippines</p>
                <p>0977 384 5879</p>
                <p>pthtkd@gmail.com</p>
            </div>
            <div class="social-media">
                <p>Follow us</p>
                <div class="icons">
                    <a href="https://www.facebook.com"><img src="/images/homepage/fb.png" alt="Facebook"></a>
                    <a href="https://www.instagram.com"><img src="/images/homepage/ig.png" alt="Instagram"></a>
                    <a href="https://www.twitch.com"><img src="/images/homepage/twitch.webp" alt="Twitch"></a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        let chatHistory = [];

        function toggleDropdown() {
            document.getElementById("dropdown").classList.toggle("show");
        }

        window.onclick = function(event) {
            if (!event.target.matches('.profile-pic img')) {
                var dropdowns = document.getElementsByClassName("dropdown-content");
                for (var i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                        openDropdown.classList.remove('show');
                    }
                }
            }
        }

        function toggleChatbot() {
            const chatbotWindow = document.getElementById('chatbotWindow');
            const chatbotButton = document.getElementById('chatbotButton');
            chatbotWindow.style.display = chatbotWindow.style.display === 'block' ? 'none' : 'block';
            chatbotButton.style.display = 'none';
            if (chatbotWindow.style.display === 'block') {
                loadChatHistory();
            }
        }

        function minimizeChatbot() {
            const chatbotWindow = document.getElementById('chatbotWindow');
            const chatbotButton = document.getElementById('chatbotButton');
            chatbotWindow.style.display = 'none';
            chatbotButton.style.display = 'block';
        }

        function sendMessage() {
            const input = document.getElementById('chatbotInput');
            const message = input.value.trim();
            if (message) {
                addMessageToChat('You', message);
                chatHistory.push({ sender: 'You', message: message });
                input.value = '';
                getChatbotResponse(message);
            }
        }

        function sendPredefinedMessage(message) {
            addMessageToChat('You', message);
            chatHistory.push({ sender: 'You', message: message });
            getChatbotResponse(message);
        }

        function addMessageToChat(sender, message) {
            const chatbotBody = document.getElementById('chatbotBody');
            const messageElement = document.createElement('div');
            messageElement.classList.add('chat-message');
            messageElement.innerHTML = `<strong>${sender}:</strong> ${message}`;
            chatbotBody.appendChild(messageElement);
            chatbotBody.scrollTop = chatbotBody.scrollHeight;
        }

        function getChatbotResponse(message) {
            let response = "Sorry, I don't understand that question.";
            
            if (message.includes('How to apply for NCC ID')) {
                response = `
                    <b>How to Apply for NCC ID:</b>
                    <ol>
                        <li>Click on the "Apply for NCC ID" button on the homepage.</li>
                        <li>Fill out the form with your personal details.</li>
                        <li>Provide your last promotion test details, region, and club.</li>
                        <li>Upload necessary documents (birth certificate and a 1:1 player picture).</li>
                        <li>Agree to the terms of service and submit the form.</li>
                    </ol>
                `;
            } else if (message.includes('Location & Store Hours')) {
                response = "Our location is at [Your Location] and our store hours are from 9 AM to 9 PM.";
            } else if (message.includes('Price lists and the Services Offer')) {
                response = "Our price list and services offered can be found on our website or by visiting our store.";
            } else if (message.includes('Book an Appointment')) {
                response = "You can book an appointment by visiting our website and using the booking feature.";
            } else if (message.includes('Do you have any discount and promotion?')) {
                response = "Yes, we offer various discounts and promotions throughout the year. Please check our website or contact us for more details.";
            }
            
            setTimeout(() => {
                addMessageToChat('Chatbot', response);
                chatHistory.push({ sender: 'Chatbot', message: response });
            }, 500);
        }

        function loadChatHistory() {
            const chatbotBody = document.getElementById('chatbotBody');
            chatbotBody.innerHTML = '';
            chatHistory.forEach(entry => {
                addMessageToChat(entry.sender, entry.message);
            });
        }
    </script>
</body>
</html>
